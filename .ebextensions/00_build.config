files:
  "/opt/elasticbeanstalk/hooks/appdeploy/pre/50build.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/usr/bin/env bash
      set -e

      # Navigate to the application directory
      cd /var/app/staging

      # Run build with longer timeout
      su -s /bin/bash -c "npm run build" webapp || {
        echo "Build failed, but continuing..."
        exit 0
      }
